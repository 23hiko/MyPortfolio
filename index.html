import React, { useState, useEffect, useRef } from 'react';

/**
 * AI Portfolio
 * Version: 0.1.8
 */

import { 
  Menu, X, Sun, Moon, ExternalLink, Mail, 
  ChevronRight, CheckCircle, Clock, Award, 
  Zap, MessageSquare, Layout, Image as ImageIcon, 
  Video, PenTool, Linkedin, Twitter, Instagram, ArrowUp 
} from 'lucide-react';

// --- 定数・データ定義 ---

const COLORS = {
  primary: '#3bf6d7', // シアン系
  accent: '#1065b9',  // ブルー系
  bgLight: '#f8faff', // 白に近い薄い青
  bgDark: '#111827',  // グレー900
};

// 経歴データ
const TIMELINE_DATA = [
  {
    year: '2023',
    title: '生成AI活用の開始',
    description: 'ChatGPTを活用し、LINEスタンプの企画・作成やTシャツデザインの販売を開始。AIによるクリエイティブの可能性を探求。'
  },
  {
    year: '2024',
    title: '動画・音楽制作への展開',
    description: 'YouTubeやTikTok向けのショート動画制作、AI生成BGMの配信を開始。マルチメディアコンテンツへの対応力を強化。'
  },
  {
    year: '2025',
    title: '実用ツールの開発',
    description: 'GPTsを活用し、商品レビュー生成、美容診断、デザイン案作成などの実用的なビジネスツールを開発・公開。'
  },
  {
    year: 'Current',
    title: 'プロフェッショナル活動',
    description: 'クラウドソーシングサービスにて、生成AIを駆使した多様なデザイン提案、コンテンツ制作案件を遂行中。'
  }
];

// 強みデータ
const STRENGTHS_DATA = [
  { id: 1, title: 'Speed & Quality', desc: 'スピードと品質を両立させる制作プロセス', icon: <Zap size={24} /> },
  { id: 2, title: 'Efficiency', desc: '従来の制作手法では時間のかかる作業を大幅に効率化', icon: <Clock size={24} /> },
  { id: 3, title: 'High Design', desc: 'デザインのクオリティは妥協しない', icon: <Award size={24} /> },
  { id: 4, title: 'Quick Response', desc: 'ご依頼に素早く対応いたします', icon: <CheckCircle size={24} /> },
  { id: 5, title: 'Communication', desc: 'クライアントとのスムーズなコミュニケーション', icon: <MessageSquare size={24} /> },
];

// 作品データ
const WORKS_DATA = [
  {
    id: 1,
    title: "YouTube・SNS用サムネイルデザイン",
    category: "YouTubeサムネイル",
    image: "./samune.jpg",
    description: "音楽、知識系など多ジャンルのサムネイル制作。世界観を伝え、視認性とクリック率を両立します。",
    tools: ["ChatGPT", "Gemini", "Canva"],
    period: "3時間",
    date: "2025年1月"
  },
  {
    id: 2,
    title: "ロゴデザイン・ブランディング",
    category: "ロゴデザイン",
    image: "./logo.jpg",
    description: "建築・飲食・医療など多業種のロゴ制作。理念を形にし、信頼感と独自性を備えたブランドイメージを構築。",
    tools: ["ChatGPT", "Gemini", "Canva"],
    period: "2日",
    date: "2024年12月"
  },
  {
    id: 3,
    title: "啓発ポスター・学術告知デザイン",
    category: "チラシ・ポスター",
    image: "./poster.jpg",
    description: "イラスト活用や情報整理により、用途に最適なデザインを提案。",
    tools: ["ChatGPT", "Gemini", "Canva"],
    period: "1日",
    date: "2024年11月"
  },
  {
    id: 4,
    title: "オリジナルVTuberアバター",
    category: "アバター",
    image: "./Avatar.jpg",
    description: "配信活動用のオリジナルキャラクターデザイン。三面図を含む。",
    tools: ["ChatGPT", "Gemini", "Canva"],
    period: "3日",
    date: "2024年10月"
  },
  {
    id: 5,
    title: "電子書籍表紙",
    category: "電子書籍表紙",
    image: "./cover.jpg",
    description: "Kindle出版用などの電子書籍の表紙のデザインを提案",
    tools: ["ChatGPT", "Gemini", "Canva"],
    period: "1日",
    date: "2024年9月"
  },
  {
    id: 6,
    title: "ChatGPTのGPTs",
    category: "GPTs",
    image: "./gpts.jpg",
    description: "業務効率化を図るため、業務自動化ツールとしてGTPsを作成。",
    tools: ["ChatGPT", "Gemini", "Canva"],
    period: "2日",
    date: "2024年8月"
  },
];

// --- コンポーネント実装 ---

// ボタンコンポーネント
const Button = ({ children, onClick, variant = 'primary', className = '', type = 'button' }) => {
  const baseStyle = "px-6 py-3 rounded-full font-medium transition-all duration-300 transform hover:-translate-y-1 shadow-lg";
  const variants = {
    primary: "bg-gradient-to-r from-[#3bf6d7] to-[#1065b9] text-white hover:shadow-[#3bf6d7]/40",
    secondary: "bg-white text-gray-800 border border-gray-200 hover:border-[#3bf6d7] dark:bg-gray-800 dark:text-white dark:border-gray-700",
    outline: "border-2 border-[#3bf6d7] text-[#3bf6d7] hover:bg-[#3bf6d7] hover:text-white"
  };

  return (
    <button type={type} onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`}>
      {children}
    </button>
  );
};

// セクションタイトル
const SectionTitle = ({ title, subtitle }) => (
  <div className="mb-12 text-center">
    <h2 className="text-3xl md:text-4xl font-bold font-poppins mb-4 bg-clip-text text-transparent bg-gradient-to-r from-[#3bf6d7] to-[#1065b9]">
      {title}
    </h2>
    <div className="w-16 h-1 bg-[#3bf6d7] mx-auto mb-4 rounded-full"></div>
    {subtitle && <p className="text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">{subtitle}</p>}
  </div>
);

// 作品カード
const WorkCard = ({ work, onClick }) => (
  <div 
    onClick={() => onClick(work)}
    className="group bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer border border-gray-100 dark:border-gray-700"
  >
    <div className="relative h-48 overflow-hidden">
      <img 
        src={work.image} 
        alt={work.title} 
        className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
      />
      <div className="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
        <span className="text-white font-medium flex items-center gap-2">
          詳細を見る <ChevronRight size={16} />
        </span>
      </div>
      <div className="absolute top-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded backdrop-blur-sm">
        {work.category}
      </div>
    </div>
    <div className="p-5">
      <h3 className="font-bold text-lg mb-2 text-gray-800 dark:text-white line-clamp-1">{work.title}</h3>
      <p className="text-sm text-gray-500 dark:text-gray-400 mb-3 line-clamp-2">{work.description}</p>
      <div className="flex flex-wrap gap-2">
        {work.tools.slice(0, 2).map((tool, idx) => (
          <span key={idx} className="text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded">
            {tool}
          </span>
        ))}
      </div>
    </div>
  </div>
);

// 作品詳細モーダル
const WorkModal = ({ work, onClose }) => {
  if (!work) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm" onClick={onClose}>
      <div 
        className="bg-white dark:bg-gray-800 rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl relative animate-in fade-in zoom-in duration-200"
        onClick={e => e.stopPropagation()}
      >
        <button 
          onClick={onClose}
          className="absolute top-4 right-4 p-2 bg-white/80 dark:bg-black/50 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors z-10"
        >
          <X size={20} className="text-gray-800 dark:text-white" />
        </button>
        
        <div className="relative h-64 md:h-80 w-full">
          <img src={work.image} alt={work.title} className="w-full h-full object-cover" />
        </div>
        
        <div className="p-6 md:p-8">
          <div className="flex flex-wrap items-center gap-3 mb-4">
            <span className="px-3 py-1 bg-[#3bf6d7]/20 text-[#1065b9] dark:text-[#3bf6d7] text-sm font-medium rounded-full">
              {work.category}
            </span>
            <span className="text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1">
              <Clock size={14} /> {work.date}
            </span>
          </div>
          
          <h2 className="text-2xl md:text-3xl font-bold mb-4 text-gray-800 dark:text-white">{work.title}</h2>
          <p className="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
            {work.description}
          </p>
          
          <div className="grid md:grid-cols-2 gap-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl">
            <div>
              <h4 className="text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">制作期間</h4>
              <p className="font-medium text-gray-800 dark:text-white">{work.period}</p>
            </div>
            <div>
              <h4 className="text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2">使用AIツール</h4>
              <div className="flex flex-wrap gap-2">
                {work.tools.map((tool, idx) => (
                  <span key={idx} className="bg-white dark:bg-gray-600 px-3 py-1 rounded-md text-sm shadow-sm text-gray-700 dark:text-gray-200 border border-gray-100 dark:border-gray-500">
                    {tool}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

// --- メインアプリケーション ---

export default function App() {
  const [activePage, setActivePage] = useState('home');
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isDarkMode, setIsDarkMode] = useState(false);
  const [scrolled, setScrolled] = useState(false);
  const [selectedWork, setSelectedWork] = useState(null);
  
  // フィルタリング用ステート
  const [workFilter, setWorkFilter] = useState('All');

  // スクロール検知
  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // ダークモード制御
  useEffect(() => {
    if (isDarkMode) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }, [isDarkMode]);

  const navItems = [
    { id: 'home', label: 'Home' },
    { id: 'about', label: 'About' },
    { id: 'works', label: 'Works' },
    { id: 'contact', label: 'Contact' }
  ];

  const navigateTo = (pageId) => {
    setActivePage(pageId);
    setIsMenuOpen(false);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  // --- ページコンポーネント ---

  const HomePage = () => (
    <div className="animate-in fade-in duration-500">
      {/* ヒーローセクション */}
      <section className="relative min-h-[90vh] flex items-center justify-center overflow-hidden bg-gray-50 dark:bg-gray-900">
        {/* 背景設定エリア */}
        <div className="absolute inset-0 z-0">
            {/* 背景画像: アップロードされた画像を使用
              画像がない場合や読み込みエラー時は非表示になり、下の背景色が有効になります
            */}
            <img 
              src="./AI_profile_back.avif" 
              alt="Hero Background" 
              className="absolute inset-0 w-full h-full object-cover transition-opacity duration-500 opacity-80 dark:opacity-60"
              onError={(e) => {
                e.target.style.display = 'none'; // 画像が見つからない場合は非表示
              }}
            />

            {/* グラデーションオーバーレイ（文字の可読性確保と雰囲気作り） */}
            {/* 上下をフェードさせてコンテンツと馴染ませる */}
            <div className="absolute inset-0 z-10 bg-gradient-to-b from-white/90 via-white/60 to-white/90 dark:from-gray-900/90 dark:via-gray-900/60 dark:to-gray-900"></div>
            
            {/* アクセントカラーの光（装飾：画像の雰囲気を強調） */}
            <div className="absolute top-20 left-10 w-72 h-72 bg-[#3bf6d7] rounded-full mix-blend-multiply filter blur-[80px] opacity-20 animate-blob z-0"></div>
            <div className="absolute bottom-20 right-10 w-72 h-72 bg-[#1065b9] rounded-full mix-blend-multiply filter blur-[80px] opacity-20 animate-blob animation-delay-2000 z-0"></div>
        </div>

        <div className="container mx-auto px-4 z-20 text-center relative">
          <div className="mb-6 inline-block px-4 py-1.5 rounded-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-[#3bf6d7]/30 text-[#1065b9] dark:text-[#3bf6d7] text-sm font-semibold tracking-wide shadow-sm">
            Next Generation Creative
          </div>
          <h1 className="text-4xl md:text-6xl lg:text-7xl font-bold font-poppins mb-6 leading-tight text-gray-900 dark:text-white drop-shadow-sm">
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-[#3bf6d7] to-[#1065b9]">生成AI</span>で<br className="md:hidden" />
            創造の可能性を広げる
          </h1>
          <p className="text-lg md:text-xl text-gray-700 dark:text-gray-200 mb-10 max-w-2xl mx-auto font-medium">
            3年の経験で培った技術と感性。<br/>
            AIツールを駆使し、あなたのビジネスを加速させるクリエイティブを提供します。
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <Button onClick={() => navigateTo('works')}>作品を見る</Button>
            <Button variant="secondary" onClick={() => navigateTo('contact')}>お問い合わせ</Button>
          </div>
        </div>
      </section>

      {/* 最新作品セクション */}
      <section className="py-20 bg-white dark:bg-gray-900">
        <div className="container mx-auto px-4">
          <SectionTitle 
            title="Recent Works" 
            subtitle="最新の制作事例をご紹介します" 
          />
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {WORKS_DATA.slice(0, 3).map((work) => (
              <WorkCard key={work.id} work={work} onClick={setSelectedWork} />
            ))}
          </div>
          <div className="text-center mt-12">
            <Button variant="outline" onClick={() => navigateTo('works')}>全ての作品を見る</Button>
          </div>
        </div>
      </section>

      {/* 強みセクション */}
      <section className="py-20 bg-gray-50 dark:bg-gray-800/50">
        <div className="container mx-auto px-4">
          <SectionTitle 
            title="Why Choose Me?" 
            subtitle="AIクリエイターとしての5つの強み" 
          />
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
            {STRENGTHS_DATA.map((item) => (
              <div key={item.id} className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow border border-gray-100 dark:border-gray-700">
                <div className="w-12 h-12 bg-[#3bf6d7]/20 rounded-lg flex items-center justify-center text-[#1065b9] dark:text-[#3bf6d7] mb-4">
                  {item.icon}
                </div>
                <h3 className="text-xl font-bold mb-2 text-gray-800 dark:text-white">{item.title}</h3>
                <p className="text-gray-600 dark:text-gray-400">{item.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>
    </div>
  );

  const AboutPage = () => (
    <div className="pt-24 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
      <div className="container mx-auto px-4">
        <SectionTitle title="About Me" />
        
        {/* プロフィール上部 */}
        <div className="flex flex-col lg:flex-row gap-12 items-center mb-20 max-w-6xl mx-auto">
          <div className="w-full lg:w-1/3 flex justify-center">
            <div className="relative w-64 h-64 md:w-80 md:h-80">
              <div className="absolute inset-0 bg-gradient-to-tr from-[#3bf6d7] to-[#1065b9] rounded-full blur-lg opacity-50 animate-pulse"></div>
              <img 
                src="./AbotMe.jpg" 
                alt="Profile" 
                className="relative w-full h-full object-cover rounded-full border-4 border-white dark:border-gray-800 shadow-xl"
                onError={(e) => {
                  e.target.src = "/api/placeholder/400/400"; // 画像がない場合のフォールバック
                }}
              />
            </div>
          </div>
          <div className="w-full lg:w-2/3">
            <h3 className="text-2xl md:text-3xl font-bold mb-4 text-gray-900 dark:text-white">
              AIと共に、新しい価値を創造する。
            </h3>
            <p className="text-lg text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
              はじめまして。AIクリエーターの竹内二三彦（23hiko）です。
              <br/><br/>
              生成AIを使い始めて3年、これまでにYoutubeのサムネ、ショート動画、アバター、ロゴ、チラシ、ポスター、GPTsなどを作成してきました。
              <br/><br/>
              私のミッションは、最新のテクノロジーを活用して、クライアント様のイメージを「形」にし、ビジネスの成長をサポートすることです。
              従来の制作フローでは考えられなかったスピードと、AI特有の偶発性をコントロールした高品質なアウトプットをお約束します。
            </p>
            
            <div className="mb-8">
              <h4 className="text-sm font-bold uppercase text-gray-500 mb-4 tracking-wider">Skill Set</h4>
              <div className="flex flex-wrap gap-3">
                {['Gemini', 'ChatGPT', 'Claude', 'Canva', 'SnovaAI'].map((skill) => (
                  <span key={skill} className="px-4 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200">
                    {skill}
                  </span>
                ))}
              </div>
            </div>
          </div>
        </div>

        {/* タイムライン */}
        <div className="max-w-4xl mx-auto">
          <h3 className="text-2xl font-bold mb-8 text-center text-gray-800 dark:text-white">Experience Timeline</h3>
          <div className="relative border-l-2 border-[#3bf6d7]/30 ml-4 md:ml-0 md:pl-0 space-y-12">
            {TIMELINE_DATA.map((item, index) => (
              <div key={index} className="relative pl-8 md:pl-0 md:flex md:gap-8 group">
                {/* タイムスタンプ (PC: Left) */}
                <div className="md:w-1/3 md:text-right md:pr-8">
                  <span className="text-3xl font-bold text-[#3bf6d7] opacity-80 group-hover:opacity-100 transition-opacity">
                    {item.year}
                  </span>
                </div>
                
                {/* ドット */}
                <div className="absolute left-[-9px] top-2 w-5 h-5 rounded-full bg-white dark:bg-gray-900 border-4 border-[#1065b9] md:left-1/2 md:-ml-[10px] z-10"></div>
                
                {/* 内容 (PC: Right) */}
                <div className="md:w-2/3 md:pl-8">
                  <h4 className="text-xl font-bold mb-2 text-gray-800 dark:text-white">{item.title}</h4>
                  <p className="text-gray-600 dark:text-gray-400 leading-relaxed">
                    {item.description}
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );

  const WorksPage = () => {
    const categories = ['All', 'YouTubeサムネイル', 'ロゴデザイン', 'チラシ・ポスター', 'アバター', '電子書籍表紙', 'GPTs'];
    
    const filteredWorks = workFilter === 'All' 
      ? WORKS_DATA 
      : WORKS_DATA.filter(work => work.category === workFilter);

    return (
      <div className="pt-24 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
        <div className="container mx-auto px-4">
          <SectionTitle title="Works" subtitle="カテゴリーから制作実績をご覧いただけます" />
          
          {/* カテゴリーフィルター */}
          <div className="flex flex-wrap justify-center gap-2 mb-12 max-w-4xl mx-auto">
            {categories.map((cat) => (
              <button
                key={cat}
                onClick={() => setWorkFilter(cat)}
                className={`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${
                  workFilter === cat
                    ? 'bg-[#1065b9] text-white shadow-lg scale-105'
                    : 'bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                }`}
              >
                {cat}
              </button>
            ))}
          </div>

          {/* 作品グリッド */}
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {filteredWorks.map((work) => (
              <WorkCard key={work.id} work={work} onClick={setSelectedWork} />
            ))}
          </div>
          
          {filteredWorks.length === 0 && (
            <div className="text-center py-20 text-gray-500">
              該当する作品はまだありません。
            </div>
          )}
        </div>
      </div>
    );
  };

  const ContactPage = () => {
    const [formState, setFormState] = useState({ name: '', email: '', subject: '', message: '' });
    const [errors, setErrors] = useState({});
    const [isSubmitted, setIsSubmitted] = useState(false);

    const validate = () => {
      const newErrors = {};
      if (!formState.name) newErrors.name = 'お名前を入力してください';
      if (!formState.email) newErrors.email = 'メールアドレスを入力してください';
      else if (!/\S+@\S+\.\S+/.test(formState.email)) newErrors.email = '正しい形式で入力してください';
      if (!formState.subject) newErrors.subject = '件名を入力してください';
      if (!formState.message) newErrors.message = 'メッセージを入力してください';
      return newErrors;
    };

    const handleSubmit = (e) => {
      e.preventDefault();
      const validationErrors = validate();
      if (Object.keys(validationErrors).length === 0) {
        // メール送信（メーラー起動）
        const subject = `【ポートフォリオ問い合わせ】${formState.subject}`;
        const body = `お名前: ${formState.name}\nメールアドレス: ${formState.email}\n\nメッセージ:\n${formState.message}`;
        // mailtoリンクを作成
        const mailtoUrl = `mailto:fumi6189@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        
        // ユーザーのメールクライアントを起動
        window.location.href = mailtoUrl;

        // 送信完了表示へ切り替え（送信アクション後）
        setIsSubmitted(true);
      } else {
        setErrors(validationErrors);
      }
    };

    const handleChange = (e) => {
      setFormState({ ...formState, [e.target.name]: e.target.value });
      if (errors[e.target.name]) {
        setErrors({ ...errors, [e.target.name]: null });
      }
    };

    return (
      <div className="pt-24 pb-20 animate-in fade-in slide-in-from-bottom-4 duration-500">
        <div className="container mx-auto px-4">
          <SectionTitle title="Contact" subtitle="制作のご依頼・ご相談はお気軽にどうぞ" />

          <div className="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto">
            {/* 連絡先情報エリア */}
            <div className="space-y-8">
               <div className="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700">
                <h3 className="text-xl font-bold mb-6 text-gray-800 dark:text-white">Contact Info</h3>
                <div className="space-y-4">
                  <div className="flex items-start gap-4">
                    <div className="bg-[#3bf6d7]/20 p-3 rounded-lg text-[#1065b9]">
                      <Mail size={20} />
                    </div>
                    <div>
                      <p className="text-sm text-gray-500">Email</p>
                      <p className="text-gray-800 dark:text-gray-200 font-medium">fumi6189@gmail.com</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-4">
                    <div className="bg-[#3bf6d7]/20 p-3 rounded-lg text-[#1065b9]">
                      <MessageSquare size={20} />
                    </div>
                    <div>
                      <p className="text-sm text-gray-500">Response Time</p>
                      <p className="text-gray-800 dark:text-gray-200 font-medium">24時間以内に返信いたします</p>
                    </div>
                  </div>
                </div>

                <div className="mt-8">
                  <h4 className="text-sm font-bold text-gray-500 mb-4 uppercase">Follow Me</h4>
                  <p className="text-gray-600 dark:text-gray-300 font-medium">製作中</p>
                </div>
              </div>
            </div>

            {/* フォームエリア */}
            <div className="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg border-t-4 border-[#3bf6d7]">
              {isSubmitted ? (
                <div className="h-full flex flex-col items-center justify-center text-center py-10">
                  <div className="w-16 h-16 bg-green-100 text-green-500 rounded-full flex items-center justify-center mb-4">
                    <CheckCircle size={32} />
                  </div>
                  <h3 className="text-2xl font-bold mb-2 text-gray-800 dark:text-white">送信完了</h3>
                  <p className="text-gray-600 dark:text-gray-300">メールソフトが起動します。<br/>内容をご確認の上、送信してください。</p>
                  <Button onClick={() => setIsSubmitted(false)} variant="outline" className="mt-6">
                    フォームに戻る
                  </Button>
                </div>
              ) : (
                <form onSubmit={handleSubmit} className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">お名前</label>
                    <input 
                      type="text" 
                      name="name" 
                      value={formState.name}
                      onChange={handleChange}
                      className={`w-full px-4 py-2 rounded-lg border ${errors.name ? 'border-red-500' : 'border-gray-200 dark:border-gray-600'} focus:ring-2 focus:ring-[#3bf6d7] focus:border-transparent dark:bg-gray-700 dark:text-white outline-none transition-all`}
                      placeholder="山田 太郎"
                    />
                    {errors.name && <p className="text-red-500 text-xs mt-1">{errors.name}</p>}
                  </div>
                  
                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">メールアドレス</label>
                    <input 
                      type="email" 
                      name="email"
                      value={formState.email}
                      onChange={handleChange}
                      className={`w-full px-4 py-2 rounded-lg border ${errors.email ? 'border-red-500' : 'border-gray-200 dark:border-gray-600'} focus:ring-2 focus:ring-[#3bf6d7] focus:border-transparent dark:bg-gray-700 dark:text-white outline-none transition-all`}
                      placeholder="example@mail.com"
                    />
                    {errors.email && <p className="text-red-500 text-xs mt-1">{errors.email}</p>}
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">件名</label>
                    <select 
                      name="subject"
                      value={formState.subject}
                      onChange={handleChange}
                      className={`w-full px-4 py-2 rounded-lg border ${errors.subject ? 'border-red-500' : 'border-gray-200 dark:border-gray-600'} focus:ring-2 focus:ring-[#3bf6d7] focus:border-transparent dark:bg-gray-700 dark:text-white outline-none transition-all`}
                    >
                      <option value="">選択してください</option>
                      <option value="制作依頼">制作のご依頼</option>
                      <option value="見積もり">お見積もり</option>
                      <option value="その他">その他のお問い合わせ</option>
                    </select>
                    {errors.subject && <p className="text-red-500 text-xs mt-1">{errors.subject}</p>}
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">メッセージ</label>
                    <textarea 
                      name="message"
                      value={formState.message}
                      onChange={handleChange}
                      rows="4"
                      className={`w-full px-4 py-2 rounded-lg border ${errors.message ? 'border-red-500' : 'border-gray-200 dark:border-gray-600'} focus:ring-2 focus:ring-[#3bf6d7] focus:border-transparent dark:bg-gray-700 dark:text-white outline-none transition-all`}
                      placeholder="ご要望や詳細をお書きください..."
                    ></textarea>
                    {errors.message && <p className="text-red-500 text-xs mt-1">{errors.message}</p>}
                  </div>

                  <Button type="submit" className="w-full mt-2">
                    送信する
                  </Button>
                </form>
              )}
            </div>
          </div>
        </div>
      </div>
    );
  };

  // --- レイアウト ---

  return (
    <div className={`min-h-screen transition-colors duration-300 font-sans ${isDarkMode ? 'dark:bg-gray-900' : 'bg-gray-50'}`}>
      {/* ヘッダー */}
      <header 
        className={`fixed w-full top-0 z-40 transition-all duration-300 ${
          scrolled || activePage !== 'home' 
            ? 'bg-white/90 dark:bg-gray-900/90 backdrop-blur-md shadow-sm py-3' 
            : 'bg-transparent py-5'
        }`}
      >
        <div className="container mx-auto px-4 flex justify-between items-center">
          <div 
            className="text-2xl font-bold font-poppins cursor-pointer flex items-center gap-2"
            onClick={() => navigateTo('home')}
          >
            <div className="w-8 h-8 rounded bg-gradient-to-br from-[#3bf6d7] to-[#1065b9] flex items-center justify-center text-white">
              <Zap size={20} fill="white" />
            </div>
            <span className="text-gray-800 dark:text-white">My<span className="text-[#1065b9] dark:text-[#3bf6d7]">Portfolio</span></span>
          </div>

          {/* デスクトップナビ */}
          <nav className="hidden md:flex items-center gap-8">
            {navItems.map((item) => (
              <button
                key={item.id}
                onClick={() => navigateTo(item.id)}
                className={`text-sm font-medium transition-colors hover:text-[#3bf6d7] ${
                  activePage === item.id 
                    ? 'text-[#1065b9] dark:text-[#3bf6d7]' 
                    : 'text-gray-600 dark:text-gray-300'
                }`}
              >
                {item.label}
              </button>
            ))}
            <button
              onClick={() => setIsDarkMode(!isDarkMode)}
              className="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-yellow-300"
              aria-label="Toggle Dark Mode"
            >
              {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}
            </button>
          </nav>

          {/* モバイルメニューボタン */}
          <div className="md:hidden flex items-center gap-4">
            <button
              onClick={() => setIsDarkMode(!isDarkMode)}
              className="text-gray-600 dark:text-yellow-300"
            >
              {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}
            </button>
            <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-gray-800 dark:text-white">
              {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
            </button>
          </div>
        </div>
      </header>

      {/* モバイルナビゲーション */}
      {isMenuOpen && (
        <div className="fixed inset-0 z-30 bg-white dark:bg-gray-900 pt-24 px-6 md:hidden animate-in slide-in-from-top-10 duration-200">
          <div className="flex flex-col gap-6 text-center">
            {navItems.map((item) => (
              <button
                key={item.id}
                onClick={() => navigateTo(item.id)}
                className={`text-2xl font-bold py-2 ${
                  activePage === item.id 
                    ? 'text-[#1065b9] dark:text-[#3bf6d7]' 
                    : 'text-gray-800 dark:text-white'
                }`}
              >
                {item.label}
              </button>
            ))}
          </div>
        </div>
      )}

      {/* メインコンテンツ */}
      <main className="min-h-screen">
        {activePage === 'home' && <HomePage />}
        {activePage === 'about' && <AboutPage />}
        {activePage === 'works' && <WorksPage />}
        {activePage === 'contact' && <ContactPage />}
      </main>

      {/* フッター */}
      <footer className="bg-gray-900 text-white py-12">
        <div className="container mx-auto px-4 text-center">
          <div className="flex justify-center items-center gap-2 mb-6 font-poppins text-xl font-bold">
             <div className="w-6 h-6 rounded bg-gradient-to-br from-[#3bf6d7] to-[#1065b9]"></div>
             MyPortfolio
          </div>
          <div className="flex justify-center gap-6 mb-8">
            {navItems.map((item) => (
              <button
                key={item.id}
                onClick={() => navigateTo(item.id)}
                className="text-gray-400 hover:text-[#3bf6d7] text-sm transition-colors"
              >
                {item.label}
              </button>
            ))}
          </div>
          <div className="w-full h-px bg-gray-800 mb-8 max-w-xl mx-auto"></div>
          <p className="text-gray-500 text-sm">
            © {new Date().getFullYear()} MyPortfolio. All Rights Reserved. <span className="ml-2 opacity-40">v0.1.8</span>
          </p>
        </div>
      </footer>

      {/* トップへ戻るボタン */}
      <button
        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
        className={`fixed bottom-6 right-6 p-3 rounded-full bg-[#1065b9] text-white shadow-lg transition-all duration-300 z-40 hover:bg-[#3bf6d7] ${
          scrolled ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'
        }`}
      >
        <ArrowUp size={20} />
      </button>

      {/* モーダル */}
      {selectedWork && (
        <WorkModal work={selectedWork} onClose={() => setSelectedWork(null)} />
      )}
    </div>
  );
}
